<div x-data class="fixed flex items-start justify-between w-full p-4 md:p-10">
    <!-- Mobile Logo -->
    <div class="md:hidden">
        {% if section.settings.mobile_logo != blank %}
            {% render 'logo' logo: section.settings.mobile_logo, has_logo: section.settings.logo != blank %}
        {% else %}
            {% render 'logo' logo: section.settings.logo, has_logo: section.settings.logo != blank %}
        {% endif %}
    </div>
    <!-- Desktop menu -->
    <nav class="flex-col hidden space-y-2 md:flex">
        <h1>Menu: <span></span></h1>
        {% for link in section.settings.menu.links %}
        <a class="uppercase {% if link.active %}underline{% endif %}" href="{{link.url}}">{{link.title}}</a>
        {% endfor %}
    </nav>
    <div class="flex items-center space-x-1">
        {% if section.settings.show_cart_button %}
        <button class="flex space-x-2">
            <span class="uppercase">
                {{section.settings.cart_button_label}}
            </span>
            <span class="grid w-6 h-6 text-white rounded-full place-content-center bg-slate-800">1</span>
        </button>
        {% endif %}

        <button x-data class="md:hidden" @click="$store.mobileMenu.toggle()">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </button>
    </div>
</div>

<!-- Desktop Logo -->
<div class="transform top-1/2 translate-y-[-50%] pl-10 fixed hidden md:block">
    {% render 'logo' logo: section.settings.logo, has_logo: section.settings.logo != blank %}
</div>

<!-- Mobile Menu -->
<div 
        x-data 
        x-show="$store.mobileMenu.open"
        class="fixed top-0 left-0 w-full h-screen bg-accent"
        x-transition:enter="transition duration-300"
        x-transition:enter-start="opacity-0 translate-x-full"
        x-transition:enter-end="opacity-100"

        x-transition:leave="transition duration-300"
        x-transition:leave-start=""
        x-transition:leave-end="translate-x-full"
    
>
    <button @click="$store.mobileMenu.toggle()" class="absolute top-8 right-8">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
        </svg>
    </button>
</div>

{% javascript %}
document.addEventListener("alpine:init", () => {
  Alpine.store("mobileMenu", {
    open: false,
    toggle() {
      this.open = !this.open;
    },
  });
});
{% endjavascript %}

{% schema %}
{
    "name": "Navigation",
    "settings": [
        {
            "type": "image_picker",
            "id": "logo",
            "label": "Logo"
        },
        {
            "type": "image_picker",
            "id": "mobile_logo",
            "label": "Logo for mobile",
            "info": "If you don't want to use the logo on mobile, you can use this logo instead."
        },
        {
            "type": "link_list",
            "id": "menu",
            "default": "main-menu",
            "label": "Menu"
        },
        {
            "type": "link_list",
            "id": "mobile-menu",
            "default": "main-menu",
            "label": "Mobile Menu"
        },
        {
            "type": "checkbox",
            "id": "show_cart_button",
            "label": "Show Cart button",
            "default": true
        },
        {
            "type": "text",
            "id": "cart_button_label",
            "label": "Cart button label",
            "default": "cart"
        }
        
    ]
}
{% endschema %}